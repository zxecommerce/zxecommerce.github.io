webpackJsonp([8],{"2b76267a78c23d3086f3":function(t,e,s){var a=s("214b094fd19fc5e6e7f2"),r=s("eb119b637dc3749105c6");s("6ab499c92a41a79a86f3")("keys",function(){return function(t){return r(a(t))}})},"5a45bbf323059c3eb8f7":function(t,e,s){t.exports={default:s("9bdb9fecb3f64860fc98"),__esModule:!0}},"6ab499c92a41a79a86f3":function(t,e,s){var a=s("5d1068788c8158502382"),r=s("91d9e3da5180694da5dd"),n=s("a6619f2c70cf4f510f7c");t.exports=function(t,e){var s=(r.Object||{})[t]||Object[t],i={};i[t]=e(s),a(a.S+a.F*n(function(){s(1)}),"Object",i)}},"9bdb9fecb3f64860fc98":function(t,e,s){s("2b76267a78c23d3086f3"),t.exports=s("91d9e3da5180694da5dd").Object.keys},d5b30ff24ee69232f205:function(t,e,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function r(){var t=document.querySelectorAll("[data-helper='subscribe']");[].concat((0,i.default)(t)).forEach(function(t){return new c.default(t)})}Object.defineProperty(e,"__esModule",{value:!0});var n=s("fafba3d44052ea8dcdf4"),i=a(n);e.default=r;var o=s("e6a7744563ce25dbca92"),c=a(o)},e6a7744563ce25dbca92:function(t,e,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=s("5a45bbf323059c3eb8f7"),n=a(r),i=s("acab2ae8d55fd58113d8"),o=a(i),c=s("0bf817924258aa08734c"),u=a(c),f=s("a8f8105d2d40178f277f"),d=a(f),l=function(){function t(e){var s=this;(0,o.default)(this,t),this.control=e,this.state={isSubscribed:!1,counter:0},this.readAttributes(),this.removeAttributes(),this.control.addEventListener("click",function(t){return s.onClick(t)})}return(0,u.default)(t,[{key:"readAttributes",value:function(){this.hasCounter=this.control.hasAttribute("data-follower-count"),this.state={isSubscribed:"true"===this.control.getAttribute("aria-selected")},this.hasCounter&&(this.state.counter=parseInt(this.control.dataset.followerCount,10)),this.url=this.control.href+".json",this.states=JSON.parse(this.control.dataset.states)}},{key:"removeAttributes",value:function(){var t=this;(0,n.default)(this.control.dataset).forEach(function(e){"followerCount"!==e&&delete t.control.dataset[e]})}},{key:"getStateAttributes",value:function(){return this.states[this.state.isSubscribed?"subscribed":"unsubscribed"]}},{key:"onClick",value:function(t){var e=this;t.preventDefault(),t.stopImmediatePropagation();var s=this.getStateAttributes();this.toggleState(),fetch(this.url,{method:s.method,credentials:"same-origin",headers:{"X-CSRF-Token":d.default.get("current_session.csrf_token")}}).then(function(t){if(!t.ok)throw new Error}).catch(function(){e.toggleState()}),this.control.blur()}},{key:"toggleState",value:function(){this.state.isSubscribed=!this.state.isSubscribed,this.hasCounter&&(this.state.counter+=this.state.isSubscribed?1:-1),this.render()}},{key:"render",value:function(){var t=this.getStateAttributes();this.control.className=t.class,this.control.textContent=t.label,this.control.setAttribute("aria-selected",this.state.isSubscribed),this.hasCounter&&(this.control.dataset.followerCount=this.state.counter)}}]),t}();e.default=l}});